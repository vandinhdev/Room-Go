<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thêm/Sửa Phòng Trọ | ROOM GO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="stylesheet" href="access/css/styles.css">
    <link rel="stylesheet" href="access/css/roomForm.css">
    <link rel="stylesheet" href="access/css/responsive.css">
    <link rel="stylesheet" href="access/css/auth.css">
    <link rel="stylesheet" href="access/css/user.css">

</head>
<body>
    <div class="container">
        <div class="form-container">
            
            <form id="roomForm" class="needs-validation" novalidate>
                <input type="hidden" id="roomId">
                
                <div class="section-title">Thông tin cơ bản</div>
                <div class="mb-3">
                    <label for="title" class="form-label">Tiêu đề</label>
                    <input type="text" class="form-control" id="title" required>
                    <div class="invalid-feedback">Vui lòng nhập tiêu đề phòng trọ</div>
                </div>

                <div class="mb-3">
                    <label for="description" class="form-label">Mô tả</label>
                    <textarea class="form-control" id="description" rows="4" required placeholder="Mô tả chi tiết về phòng trọ..."></textarea>
                    <div class="invalid-feedback">Vui lòng nhập mô tả phòng trọ</div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="price" class="form-label">Giá thuê (VNĐ/tháng)</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="price" min="1" required>
                            <span class="input-group-text">VNĐ</span>
                            <div class="invalid-feedback">Vui lòng nhập giá thuê hợp lệ (lớn hơn 0)</div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="area" class="form-label">Diện tích (m²)</label>
                        <div class="input-group">
                            <input type="number" step="0.1" class="form-control" id="area" min="0.1" required>
                            <span class="input-group-text">m²</span>
                            <div class="invalid-feedback">Vui lòng nhập diện tích hợp lệ (lớn hơn 0)</div>
                        </div>
                    </div>
                </div>

                <div class="section-title">Vị trí</div>
                
                <div class="row">
                    <div class="col-md-4 mb-3">
                        <label for="province" class="form-label">
                            <i class="fas fa-map-marker-alt me-1"></i> Tỉnh/Thành phố
                        </label>
                        <select class="form-select" id="province" required>
                            <option value="">Chọn tỉnh/thành phố</option>
                        </select>
                        <div class="invalid-feedback">Vui lòng chọn tỉnh/thành phố</div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="district" class="form-label">
                            <i class="fas fa-map me-1"></i> Quận/Huyện
                        </label>
                        <select class="form-select" id="district" required>
                            <option value="">Chọn quận/huyện</option>
                        </select>
                        <div class="invalid-feedback">Vui lòng chọn quận/huyện</div>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="ward" class="form-label">
                            <i class="fas fa-location-dot me-1"></i> Phường/Xã
                        </label>
                        <select class="form-select" id="ward" required>
                            <option value="">Chọn phường/xã</option>
                        </select>
                        <div class="invalid-feedback">Vui lòng chọn phường/xã</div>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="address" class="form-label">
                        <i class="fas fa-home me-1"></i> Địa chỉ cụ thể
                    </label>
                    <input type="text" class="form-control" id="address" required placeholder="Số nhà, tên đường...">
                    <div class="invalid-feedback">Vui lòng nhập địa chỉ cụ thể</div>
                    
                    <!-- Hidden fields for coordinates -->
                    <input type="hidden" id="latitude">
                    <input type="hidden" id="longitude">
                    
                    <!-- Loading spinner -->
                    <div id="addressLoading" class="d-none mt-2">
                        <i class="fas fa-spinner fa-spin"></i> Đang tìm kiếm...
                    </div>
                    
                    <!-- Map button -->
                    <button type="button" id="showMapBtn" class="btn btn-outline-info btn-sm mt-2 d-none">
                        <i class="fas fa-map-location-dot me-1"></i> Xem vị trí trên bản đồ
                    </button>
                    
                    <!-- Map container -->
                    <div id="mapContainer" class="mt-3 d-none" style="height: 300px; border-radius: 8px; overflow: hidden;"></div>
                </div>

                <div class="section-title">Hình ảnh phòng trọ</div>
                <div class="mb-3">
                    <div class="image-dropzone-container">
                        <div id="imageContainer" class="image-upload-container mb-3">
                            <!-- Images will be displayed here -->
                        </div>
                        <div id="uploadZone" class="image-upload-dropzone">
                            <div class="upload-icon">
                                <i class="fas fa-camera"></i>
                            </div>
                            <div class="upload-text">
                                Hình ảnh hợp lệ
                            </div>
                            <div class="upload-hint">
                                ĐĂNG TỪ 03 ĐẾN 12 HÌNH
                            </div>
                            <input type="file" id="fileUpload" class="hidden-file-input" accept="image/*" multiple>
                        </div>
                        <div id="smallUploadZone" class="small-upload-dropzone" style="display: none;">
                            <i class="fas fa-plus"></i>
                            <input type="file" id="smallFileUpload" class="hidden-file-input" accept="image/*" multiple>
                        </div>
                    </div>
                    <small class="form-text text-muted">Thêm hình ảnh rõ nét sẽ giúp người thuê dễ dàng quyết định hơn</small>
                </div>


                <div class="form-actions">
                    <div>
                        <a href="index.html" class="btn btn-secondary"><i class="fas fa-times me-1"></i> Hủy</a>
                    </div>
                    <div>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-save me-1"></i> Lưu phòng trọ</button>
                    </div>
                </div>
        </form>
    </div>

    <!-- Navigation button to return to main page -->
    <div class="container text-center mb-4">
        <a href="index.html" class="btn btn-link text-decoration-none">
            <i class="fas fa-arrow-left me-1"></i> Quay lại trang chủ
        </a>
    </div>

   

    <!-- Vietmap SDK -->
    <script src='https://maps.vietmap.vn/api/gl-js/v2.10.0/vietmap-gl.js'></script>
    <link href='https://maps.vietmap.vn/api/gl-js/v2.10.0/vietmap-gl.css' rel='stylesheet' />
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="js/header.js"></script>
    <script type="module" src="js/roomForm.js"></script>
    
    <!-- Form validation script -->
    <script>
    // Enable Bootstrap validation
    (() => {
        'use strict'
        
        // Fetch all forms we want to apply validation styles to
        const forms = document.querySelectorAll('.needs-validation')
        
        // Loop over them and prevent submission
        Array.from(forms).forEach(form => {
            form.addEventListener('submit', event => {
                if (!form.checkValidity()) {
                    event.preventDefault()
                    event.stopPropagation()
                }
                
                form.classList.add('was-validated')
            }, false)
        })
    })()
    </script>
    

</body>
</html>
